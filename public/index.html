<html>
    <head>
        <script src="/socket.io/socket.io.js" type="text/javascript"></script>
        <style>
            .mainWrapper{
                display: flex;
                flex-direction: column;
                margin: 10px;
                border: 2px;
            }

            .connectionWrapper{
                width: 400px;
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
        </style>
    </head>
    <body>
        <div class="mainWrapper">
            <div class="connectionWrapper">
                <input type="'text" id="username"/>
                <button onclick="createConnection()">
                    Create Connection
                </button>
            </div>


            <div style="display: flex;">
                <input type="text" id="message_input"/>
                <button id="sendMessageButton">
                    SEND
                </button>
            </div>
        </div>
    </body>

    <script>
        function createConnection() {
            console.log('creating new connection');
            const socket = io();  // Establish the WebSocket connection
    
            // Add the event listener inside the createConnection function
            document.getElementById('sendMessageButton').addEventListener('click', () => {
                const message = document.getElementById('message_input').value;  // Use .value to get input value
                console.log('Message to send:', message);
                socket.emit('user-message', message);  // Send message to server
            });
        }
    </script>

</html>